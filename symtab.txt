COPY    START   1000
FIRST   STL     RETADR
CLOOP   JSUB    RDREC
NULL	LDA     LENGTH
NULL	COMP    ZERO
NULL	JEQ     ENDFIL
NULL	JSUB    WRREC
NULL	J       CLOOP
ENDFIL  LDA     EOF
NULL	STA     BUFFER
NULL	LDA     THREE
NULL	STA     LENGTH
NULL	JSUB    WRREC
NULL	LDL     RETADR
NULL	RSUB	NULL
EOF     BYTE    C'EOF'
THREE   WORD    3
ZERO    WORD    0
RETADR  RESW    1
LENGTH  RESW    1
BUFFER  RESB    4096

RDREC   LDX     ZERO
NULL	LDA     ZERO
RLOOP   TD      INPUT
NULL	JEQ     RLOOP
NULL	RD      INPUT
NULL	COMP    ZERO
NULL	JEQ     EXIT
NULL	STCH    BUFFER,X
NULL	TIX     MAXLEN
NULL	JLT     RLOOP
EXIT    STX     LENGTH
NULL	RSUB	NULL
INPUT   BYTE    X'F1'
MAXLEN  WORD    4096

WRREC   LDX     ZERO
WLOOP   TD      OUTPUT
NULL	JEQ     WLOOP
NULL	LDCH    BUFFER,X
NULL	WD      OUTPUT
NULL	TIX     LENGTH
NULL	JLT     WLOOP
NULL	RSUB	NULL
OUTPUT  BYTE    X'05'
NULL	END     FIRST